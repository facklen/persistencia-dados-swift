<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parte 5: Opera√ß√µes CRUD Explicadas - Slides Interativos</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            overflow: hidden;
            cursor: pointer;
        }

        .slide {
            display: none;
            height: 100vh;
            padding: 60px;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative;
        }

        .slide.active {
            display: flex;
        }

        .slide-number {
            position: absolute;
            top: 30px;
            right: 30px;
            background: rgba(255,255,255,0.2);
            padding: 10px 15px;
            border-radius: 20px;
            font-weight: bold;
            backdrop-filter: blur(10px);
        }

        .timing {
            position: absolute;
            top: 30px;
            left: 30px;
            background: rgba(255,255,255,0.2);
            padding: 10px 15px;
            border-radius: 20px;
            font-weight: bold;
            backdrop-filter: blur(10px);
        }

        h1 {
            font-size: 4em;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            line-height: 1.2;
        }

        h2 {
            font-size: 3em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .big-text {
            font-size: 2.5em;
            line-height: 1.4;
            max-width: 90%;
        }
        
        .medium-text {
            font-size: 2em;
            line-height: 1.5;
            max-width: 90%;
        }
        
        .highlight-box {
            background: rgba(255,255,255,0.15);
            padding: 30px;
            border-radius: 20px;
            margin: 20px 0;
            border: 2px solid rgba(255,255,255,0.3);
            backdrop-filter: blur(10px);
        }

        .code-box {
            background: rgba(0,0,0,0.3);
            padding: 25px;
            border-radius: 15px;
            font-family: 'Courier New', monospace;
            text-align: left;
            margin: 20px auto;
            max-width: 80%;
            border: 2px solid rgba(255,255,255,0.2);
        }

        .list-item {
            font-size: 1.8em;
            margin: 15px 0;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
        }

        .create-slide {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }

        .read-slide {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .update-slide {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .delete-slide {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }

        .test-slide {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        }

        .concept-slide {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .final-slide {
            background: linear-gradient(135deg, #ff6e7f 0%, #bfe9ff 100%);
        }

        .navigation {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            z-index: 1000;
        }

        .nav-btn {
            background: rgba(255,255,255,0.3);
            color: white;
            border: 2px solid rgba(255,255,255,0.5);
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
        }

        .nav-btn:hover {
            background: rgba(255,255,255,0.5);
            transform: scale(1.05);
        }

        .emoji-large {
            font-size: 6em;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

<!-- Slide 1: T√≠tulo -->
<div class="slide concept-slide active" id="slide1">
    <div class="timing">0:00 - 1:00</div>
    <div class="slide-number">1 / 15</div>
    <div class="emoji-large">üéì</div>
    <h1>Opera√ß√µes CRUD<br>Explicadas e Expandidas</h1>
    <div class="highlight-box">
        <p class="medium-text">
            Entender profundamente + adicionar UPDATE<br>
            + melhorar DELETE + interface completa
        </p>
    </div>
    <p class="big-text" style="margin-top: 30px;">12 minutos de dom√≠nio total!</p>
</div>

<!-- Slide 2: CREATE - Anatomia -->
<div class="slide create-slide" id="slide2">
    <div class="timing">1:00 - 1:30</div>
    <div class="slide-number">2 / 15</div>
    <h2>üìñ CREATE: Anatomia Completa</h2>
    <div class="code-box" style="max-width: 90%;">
        <p style="margin-bottom: 15px;">func createTransaction(...) async throws -> String {</p>
        <p style="margin-left: 30px; margin-bottom: 10px;">guard isValidTransaction(...) else { throw ... }</p>
        <p style="margin-left: 30px; margin-bottom: 10px;">let path = "users/\(userId)/transactions"</p>
        <p style="margin-left: 30px; margin-bottom: 10px;">let id = try await save(...)</p>
        <p style="margin-left: 30px; margin-bottom: 10px;">return id</p>
        <p>}</p>
    </div>
    <p class="big-text" style="margin-top: 20px;">‚úÖ Valida√ß√£o preventiva, path hier√°rquico, perfeito!</p>
</div>

<!-- Slide 3: Async/Await -->
<div class="slide create-slide" id="slide3">
    <div class="timing">1:30 - 2:15</div>
    <div class="slide-number">3 / 15</div>
    <h2>‚ö° Por Que ASYNC?</h2>
    <div class="highlight-box" style="max-width: 80%;">
        <div class="list-item">async throws -> String: Opera√ß√£o ass√≠ncrona que pode dar erro</div>
        <div class="list-item">await: Espera Firebase completar SEM travar UI</div>
        <div class="list-item">Path hier√°rquico: users/userId/transactions</div>
        <div class="list-item">return docId: ID gerado pelo Firebase</div>
    </div>
    <p class="big-text" style="margin-top: 30px;">
        ‚è±Ô∏è Firebase leva tempo - async previne travamento!
    </p>
</div>

<!-- Slide 4: Throws -->
<div class="slide create-slide" id="slide4">
    <div class="timing">2:15 - 2:45</div>
    <div class="slide-number">4 / 15</div>
    <h2>üõ°Ô∏è Valida√ß√£o Preventiva</h2>
    <div class="code-box" style="max-width: 70%;">
        <p>guard isValidTransaction(transaction) else {</p>
        <p style="margin-left: 30px;">throw FirestoreError.invalidData</p>
        <p>}</p>
    </div>
    <div class="highlight-box" style="max-width: 80%; margin-top: 30px;">
        <h3 style="margin-bottom: 20px;">Benef√≠cios:</h3>
        <div class="list-item">üí∞ Economia - n√£o gasta opera√ß√£o Firebase</div>
        <div class="list-item">‚ö° Performance - erro imediato, sem lat√™ncia</div>
        <div class="list-item">üéØ Consist√™ncia - banco sempre v√°lido</div>
    </div>
</div>

<!-- Slide 5: Timestamps -->
<div class="slide create-slide" id="slide5">
    <div class="timing">2:45 - 3:30</div>
    <div class="slide-number">5 / 15</div>
    <h2>üìÖ Melhoria: Timestamps de Auditoria</h2>
    <div class="code-box" style="max-width: 80%;">
        <p>// ‚úèÔ∏è ADICIONAR ao Transaction.swift</p>
        <p>var createdAt: Timestamp = Timestamp(date: Date())</p>
        <p>var updatedAt: Timestamp = Timestamp(date: Date())</p>
        <p>var isDeleted: Bool = false</p>
        <p>var deletedAt: Timestamp?</p>
    </div>
    <p class="big-text" style="margin-top: 30px;">‚úÖ Agora com auditoria completa!</p>
</div>

<!-- Slide 6: READ Query -->
<div class="slide read-slide" id="slide6">
    <div class="timing">3:30 - 4:00</div>
    <div class="slide-number">6 / 15</div>
    <h2>üìö READ: Anatomia da Query</h2>
    <div class="code-box" style="max-width: 90%;">
        <p>let transactions = try await service.getDocuments(</p>
        <p style="margin-left: 30px;">from: "users/\(userId)/transactions",</p>
        <p style="margin-left: 30px;">type: Transaction.self,</p>
        <p style="margin-left: 30px;">limit: 50,</p>
        <p style="margin-left: 30px;">orderBy: "date",</p>
        <p style="margin-left: 30px;">descending: true</p>
        <p>)</p>
    </div>
    <p class="big-text" style="margin-top: 20px;">Query completa: filtro, ordena√ß√£o, limite!</p>
</div>

<!-- Slide 7: Codable -->
<div class="slide read-slide" id="slide7">
    <div class="timing">4:45 - 5:30</div>
    <div class="slide-number">7 / 15</div>
    <h2>üé® M√°gica do Codable</h2>
    <div class="highlight-box" style="max-width: 85%;">
        <p class="big-text" style="margin-bottom: 30px;">
            document.data(as: Transaction.self)
        </p>
        <div style="background: rgba(0,0,0,0.2); padding: 20px; border-radius: 10px; margin: 20px 0;">
            <p class="medium-text">Firebase: {"amount": 5000, "description": "Sal√°rio"}</p>
            <p class="medium-text" style="margin-top: 15px;">‚¨áÔ∏è</p>
            <p class="medium-text" style="margin-top: 15px;">Swift: Transaction(amount: 5000, ...)</p>
        </div>
        <p class="medium-text" style="margin-top: 20px;">
            ‚ùå Sem Codable? Parsing manual de CADA campo!
        </p>
    </div>
</div>

<!-- Slide 8: UPDATE Introdu√ß√£o -->
<div class="slide update-slide" id="slide8">
    <div class="timing">5:30 - 6:00</div>
    <div class="slide-number">8 / 15</div>
    <h2>‚úèÔ∏è UPDATE √© Especial</h2>
    <div class="highlight-box" style="max-width: 80%;">
        <div class="list-item">üìÑ Documento completo: Substitui tudo</div>
        <div class="list-item">‚ö° Campos espec√≠ficos (Merge): Atualiza s√≥ alguns</div>
    </div>
    <p class="big-text" style="margin-top: 40px;">
        Vamos implementar com <strong>merge inteligente</strong>!
    </p>
</div>

<!-- Slide 9: UPDATE Merge -->
<div class="slide update-slide" id="slide9">
    <div class="timing">6:45 - 7:30</div>
    <div class="slide-number">9 / 15</div>
    <h2>‚ö° Merge: O Par√¢metro Cr√≠tico</h2>
    <div class="code-box" style="max-width: 85%;">
        <p>try db.collection(path).document(id)</p>
        <p style="margin-left: 30px;">.setData(from: doc, merge: true)</p>
    </div>
    <div class="highlight-box" style="max-width: 80%; margin-top: 30px;">
        <div class="list-item">‚úÖ merge: true ‚Üí Atualiza s√≥ campos enviados</div>
        <div class="list-item">‚ùå merge: false ‚Üí Substitui documento inteiro</div>
    </div>
    <p class="big-text" style="margin-top: 30px;">
        ‚ö†Ô∏è Sem merge = PERDA DE DADOS!
    </p>
</div>

<!-- Slide 10: DELETE Problema -->
<div class="slide delete-slide" id="slide10">
    <div class="timing">7:30 - 8:00</div>
    <div class="slide-number">10 / 15</div>
    <h2>üóëÔ∏è DELETE: Problema Atual</h2>
    <div class="code-box" style="max-width: 80%;">
        <p>// ‚úÖ J√Å EXISTE (mas s√≥ HARD DELETE)</p>
        <p>func deleteTransaction(...) async throws {</p>
        <p style="margin-left: 30px;">try await service.deleteDocument(...)</p>
        <p>}</p>
    </div>
    <p class="big-text" style="margin-top: 40px; color: #ff6b6b;">
        ‚ùå Remove PERMANENTEMENTE!<br>
        Sem auditoria!
    </p>
</div>

<!-- Slide 11: Soft Delete -->
<div class="slide delete-slide" id="slide11">
    <div class="timing">8:00 - 8:45</div>
    <div class="slide-number">11 / 15</div>
    <h2>üè∑Ô∏è Soft Delete: A Solu√ß√£o</h2>
    <div class="code-box" style="max-width: 85%;">
        <p>if soft {</p>
        <p style="margin-left: 30px;">let data = [</p>
        <p style="margin-left: 60px;">"isDeleted": true,</p>
        <p style="margin-left: 60px;">"deletedAt": Timestamp(date: Date())</p>
        <p style="margin-left: 30px;">]</p>
        <p style="margin-left: 30px;">try await update(data, merge: true)</p>
        <p>} else {</p>
        <p style="margin-left: 30px;">try await delete(...) // hard delete</p>
        <p>}</p>
    </div>
</div>

<!-- Slide 12: Interface -->
<div class="slide test-slide" id="slide12">
    <div class="timing">9:30 - 10:00</div>
    <div class="slide-number">12 / 15</div>
    <h2>üé® Interface Completa</h2>
    <div class="highlight-box" style="max-width: 80%;">
        <h3 style="margin-bottom: 20px;">CRUDDemoView.swift</h3>
        <div class="list-item">‚ûï Bot√£o Criar: Nova transa√ß√£o</div>
        <div class="list-item">üìã Bot√£o Carregar: Lista completa</div>
        <div class="list-item">‚úèÔ∏è Bot√£o Atualizar: Modifica valor</div>
        <div class="list-item">üóëÔ∏è Bot√£o Soft Delete: Marca deletado</div>
    </div>
    <p class="big-text" style="margin-top: 30px;">
        Tudo funcionando no simulador!
    </p>
</div>

<!-- Slide 13: Conceitos Revisados -->
<div class="slide concept-slide" id="slide13">
    <div class="timing">11:00 - 11:30</div>
    <div class="slide-number">13 / 15</div>
    <h2>üéì O Que Voc√™ Dominou</h2>
    <div class="highlight-box" style="max-width: 85%;">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
            <div class="list-item">‚úÖ CREATE com valida√ß√£o</div>
            <div class="list-item">‚úÖ READ otimizado</div>
            <div class="list-item">‚úÖ UPDATE com merge</div>
            <div class="list-item">‚úÖ DELETE soft/hard</div>
            <div class="list-item">‚úÖ Timestamps auditoria</div>
            <div class="list-item">‚úÖ Async/await</div>
            <div class="list-item">‚úÖ Throws robustos</div>
            <div class="list-item">‚úÖ Queries otimizadas</div>
        </div>
    </div>
</div>

<!-- Slide 14: Comparativo -->
<div class="slide concept-slide" id="slide14">
    <div class="timing">11:30 - 11:45</div>
    <div class="slide-number">14 / 15</div>
    <h2>üìä Parte 4 vs Parte 5</h2>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; max-width: 90%;">
        <div class="highlight-box">
            <h3 style="margin-bottom: 20px;">J√Å TINHA (Parte 4)</h3>
            <div class="list-item">‚úÖ CREATE validado</div>
            <div class="list-item">‚úÖ READ com queries</div>
            <div class="list-item">‚úÖ DELETE hard</div>
        </div>
        <div class="highlight-box" style="background: rgba(46, 213, 115, 0.3);">
            <h3 style="margin-bottom: 20px;">ADICIONAMOS (Parte 5)</h3>
            <div class="list-item">‚ûï UPDATE completo</div>
            <div class="list-item">üè∑Ô∏è Soft delete</div>
            <div class="list-item">üìÖ Timestamps</div>
            <div class="list-item">üé® Interface teste</div>
        </div>
    </div>
</div>

<!-- Slide 15: Final -->
<div class="slide final-slide" id="slide15">
    <div class="timing">11:45 - 12:00</div>
    <div class="slide-number">15 / 15</div>
    <div class="emoji-large">üéâ</div>
    <h1>Parab√©ns!</h1>
    <div class="highlight-box" style="max-width: 80%;">
        <p class="big-text" style="margin-bottom: 30px;">
            CRUD completo + auditoria profissional!
        </p>
        <div class="medium-text" style="margin: 20px 0;">
            ‚úÖ CREATE ‚Ä¢ READ ‚Ä¢ UPDATE ‚Ä¢ DELETE<br>
            ‚úÖ Valida√ß√µes ‚Ä¢ Timestamps ‚Ä¢ Interface
        </div>
    </div>
    <div class="highlight-box" style="max-width: 80%; margin-top: 30px; background: rgba(255,255,255,0.25);">
        <h3 style="margin-bottom: 15px;">üìç Pr√≥xima: Parte 6</h3>
        <p class="big-text">LISTENERS EM TEMPO REAL!</p>
        <p class="medium-text" style="margin-top: 15px;">Sincroniza√ß√£o autom√°tica entre dispositivos!</p>
    </div>
</div>

<!-- Navega√ß√£o -->
<div class="navigation">
    <button class="nav-btn" id="homeBtn">üè† In√≠cio</button>
    <button class="nav-btn" id="prevBtn">‚Üê Anterior</button>
    <button class="nav-btn" style="background: rgba(255,255,255,0.4);">
        <span id="slideCounter">1 / 15</span>
    </button>
    <button class="nav-btn" id="nextBtn">Pr√≥ximo ‚Üí</button>
    <button class="nav-btn" id="endBtn">üèÅ Fim</button>
</div>

<script>
let currentSlide = 1;
const totalSlides = 15;

function goToSlide(slideNumber) {
    if (slideNumber < 1) slideNumber = 1;
    if (slideNumber > totalSlides) slideNumber = totalSlides;
    
    try {
        const allSlides = document.querySelectorAll('.slide');
        allSlides.forEach(slide => {
            slide.classList.remove('active');
        });
        
        const targetSlide = document.getElementById(`slide${slideNumber}`);
        if (targetSlide) {
            targetSlide.classList.add('active');
            currentSlide = slideNumber;
            
            const counter = document.getElementById('slideCounter');
            if (counter) {
                counter.textContent = `${currentSlide} / ${totalSlides}`;
            }
        } else {
            console.error('Slide n√£o encontrado:', slideNumber);
        }
    } catch (error) {
        console.error('Erro ao navegar para slide:', error);
    }
}

document.addEventListener('keydown', function(e) {
    e.preventDefault();
    
    if (e.key === 'ArrowRight' || e.key === ' ' || e.key === 'Enter') {
        goToSlide(currentSlide + 1);
    } else if (e.key === 'ArrowLeft' || e.key === 'Backspace') {
        goToSlide(currentSlide - 1);
    } else if (e.key === 'Home') {
        goToSlide(1);
    } else if (e.key === 'End') {
        goToSlide(totalSlides);
    }
});

document.addEventListener('click', function(e) {
    if (e.target.classList.contains('nav-btn') || 
        e.target.closest('.nav-btn') || 
        e.target.closest('.navigation') ||
        e.target.id === 'slideCounter') {
        return;
    }
    
    if (e.clientX > window.innerWidth / 2) {
        goToSlide(currentSlide + 1);
    } else {
        goToSlide(currentSlide - 1);
    }
});

document.addEventListener('DOMContentLoaded', function() {
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const homeBtn = document.getElementById('homeBtn');
    const endBtn = document.getElementById('endBtn');
    
    if (prevBtn) {
        prevBtn.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            goToSlide(currentSlide - 1);
        });
    }
    
    if (nextBtn) {
        nextBtn.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            goToSlide(currentSlide + 1);
        });
    }
    
    if (homeBtn) {
        homeBtn.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            goToSlide(1);
        });
    }
    
    if (endBtn) {
        endBtn.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            goToSlide(totalSlides);
        });
    }
    
    goToSlide(1);
});

window.addEventListener('load', function() {
    const activeSlides = document.querySelectorAll('.slide.active');
    if (activeSlides.length === 0) {
        goToSlide(1);
    }
});
</script>

</body>
</html>
