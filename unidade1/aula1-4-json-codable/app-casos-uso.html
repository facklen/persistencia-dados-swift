<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aula 1.4 - UserDefaults vs Outras OpÃ§Ãµes | PersistÃªncia de Dados Swift</title>
  <meta name="description" content="App interativo para demonstrar quando usar UserDefaults vs Core Data, Firebase e Keychain"
  <link rel="canonical" href="https://seu-usuario.github.io/persistencia-dados-swift/unidade1/aula1-4-json-codable/app-casos-uso-userdefaults.html">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
    .fade-in { animation: fadeIn 0.3s ease-in; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  </style>
</head>
<body class="bg-gray-100">
  <!-- Header -->
  <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6">
    <div class="max-w-6xl mx-auto">
      <h1 class="text-3xl font-bold mb-2">ğŸ“š Aula 1.4: Casos de Uso - UserDefaults vs Outras OpÃ§Ãµes</h1>
      <p class="text-blue-100">Matriz de DecisÃ£o TÃ©cnica para PersistÃªncia de Dados</p>
    </div>
  </div>

  <div class="max-w-6xl mx-auto p-6">
    <!-- Navigation Tabs -->
    <div class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-8">
      <button onclick="showCase('config')" id="btn-config" class="case-btn bg-green-500 text-white p-4 rounded-lg border-2 border-transparent">
        <div class="text-2xl mb-2">âš™ï¸</div>
        <h3 class="font-bold text-sm">âœ… ConfiguraÃ§Ãµes</h3>
        <p class="text-xs opacity-75">Uso CORRETO</p>
      </button>
      
      <button onclick="showCase('large')" id="btn-large" class="case-btn bg-white border-gray-200 p-4 rounded-lg border-2 hover:border-gray-300">
        <div class="text-2xl mb-2">âš ï¸</div>
        <h3 class="font-bold text-sm">âŒ Dados Grandes</h3>
        <p class="text-xs opacity-75">Uso INCORRETO</p>
      </button>

      <button onclick="showCase('coredata')" id="btn-coredata" class="case-btn bg-white border-gray-200 p-4 rounded-lg border-2 hover:border-gray-300">
        <div class="text-2xl mb-2">ğŸ—„ï¸</div>
        <h3 class="font-bold text-sm">Core Data</h3>
        <p class="text-xs opacity-75">Dados relacionais</p>
      </button>

      <button onclick="showCase('firebase')" id="btn-firebase" class="case-btn bg-white border-gray-200 p-4 rounded-lg border-2 hover:border-gray-300">
        <div class="text-2xl mb-2">â˜ï¸</div>
        <h3 class="font-bold text-sm">Firebase</h3>
        <p class="text-xs opacity-75">SincronizaÃ§Ã£o</p>
      </button>

      <button onclick="showCase('keychain')" id="btn-keychain" class="case-btn bg-white border-gray-200 p-4 rounded-lg border-2 hover:border-gray-300">
        <div class="text-2xl mb-2">ğŸ”</div>
        <h3 class="font-bold text-sm">Keychain</h3>
        <p class="text-xs opacity-75">Dados sensÃ­veis</p>
      </button>
    </div>

    <!-- Content Area -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
      <!-- Left Column -->
      <div class="space-y-6">
        <!-- Case Content -->
        <div id="case-config" class="case-content bg-white p-6 rounded-lg shadow">
          <h2 class="text-2xl font-bold mb-4">âœ… ConfiguraÃ§Ãµes do App</h2>
          <p class="text-gray-600 mb-4">Dados pequenos, simples e que mudam raramente</p>
          <div class="bg-blue-50 p-3 rounded border-l-4 border-blue-500">
            <p class="text-sm"><strong>Exemplo:</strong> Tema, idioma, preferÃªncias de notificaÃ§Ã£o</p>
          </div>
          
          <!-- Interactive Demo -->
          <div class="mt-6 bg-green-50 p-4 rounded-lg border border-green-200">
            <h4 class="font-bold text-green-800 mb-3">ğŸ›ï¸ ConfiguraÃ§Ãµes Interativas</h4>
            <div class="space-y-3">
              <div class="flex items-center justify-between">
                <label class="text-sm font-medium">Tema:</label>
                <select class="border rounded px-2 py-1">
                  <option value="light">Claro</option>
                  <option value="dark">Escuro</option>
                  <option value="auto">AutomÃ¡tico</option>
                </select>
              </div>
              <div class="flex items-center justify-between">
                <label class="text-sm font-medium">NotificaÃ§Ãµes:</label>
                <input type="checkbox" checked class="rounded">
              </div>
            </div>
            <div class="mt-4 p-3 bg-green-100 rounded">
              <p class="text-sm text-green-700">ğŸ’¾ <strong>Tamanho:</strong> 2KB | âš¡ <strong>Carregamento:</strong> 0.1s</p>
            </div>
          </div>
        </div>

        <div id="case-large" class="case-content bg-white p-6 rounded-lg shadow hidden">
          <h2 class="text-2xl font-bold mb-4">âŒ Dados Grandes</h2>
          <p class="text-gray-600 mb-4">Arrays grandes, listas complexas</p>
          <div class="bg-red-50 p-3 rounded border-l-4 border-red-500">
            <p class="text-sm"><strong>Problema:</strong> 2000+ transaÃ§Ãµes, listas de produtos</p>
          </div>
          
          <div class="mt-6 bg-red-50 p-4 rounded-lg border border-red-200">
            <h4 class="font-bold text-red-800 mb-3">âš ï¸ Problemas de Performance</h4>
            <div class="space-y-2">
              <div class="flex items-center space-x-2">
                <span class="text-red-600">ğŸ•</span>
                <span>InicializaÃ§Ã£o lenta: 3+ segundos</span>
              </div>
              <div class="flex items-center space-x-2">
                <span class="text-red-600">ğŸ’¥</span>
                <span>App travando ao salvar dados</span>
              </div>
              <div class="bg-red-100 p-3 rounded mt-4">
                <p class="text-sm text-red-700">ğŸ’¾ <strong>Tamanho:</strong> 15MB | ğŸŒ <strong>Carregamento:</strong> 3.2s</p>
              </div>
            </div>
          </div>
        </div>

        <div id="case-coredata" class="case-content bg-white p-6 rounded-lg shadow hidden">
          <h2 class="text-2xl font-bold mb-4">ğŸ—„ï¸ Core Data</h2>
          <p class="text-gray-600 mb-4">Relacionamentos, queries, grandes volumes locais</p>
          <div class="bg-blue-50 p-3 rounded border-l-4 border-blue-500">
            <p class="text-sm"><strong>Ideal para:</strong> Banco de dados local com relacionamentos</p>
          </div>
          
          <div class="mt-6 bg-blue-50 p-4 rounded-lg border border-blue-200">
            <h4 class="font-bold text-blue-800 mb-3">âœ… Vantagens</h4>
            <ul class="space-y-2 text-sm">
              <li>âœ… Queries SQL eficientes</li>
              <li>âœ… Relacionamentos entre entidades</li>
              <li>âœ… Performance para grandes volumes</li>
              <li>âœ… Funciona 100% offline</li>
            </ul>
          </div>
        </div>

        <div id="case-firebase" class="case-content bg-white p-6 rounded-lg shadow hidden">
          <h2 class="text-2xl font-bold mb-4">â˜ï¸ Firebase</h2>
          <p class="text-gray-600 mb-4">Dados compartilhados, sincronizaÃ§Ã£o automÃ¡tica</p>
          <div class="bg-purple-50 p-3 rounded border-l-4 border-purple-500">
            <p class="text-sm"><strong>Ideal para:</strong> Dados colaborativos, backup automÃ¡tico</p>
          </div>
          
          <div class="mt-6 bg-purple-50 p-4 rounded-lg border border-purple-200">
            <h4 class="font-bold text-purple-800 mb-3">â˜ï¸ Vantagens</h4>
            <ul class="space-y-2 text-sm">
              <li>âœ… SincronizaÃ§Ã£o automÃ¡tica</li>
              <li>âœ… Backup automÃ¡tico</li>
              <li>ğŸ‘¥ ColaboraÃ§Ã£o em tempo real</li>
              <li>ğŸ“ˆ Escalabilidade infinita</li>
            </ul>
          </div>
        </div>

        <div id="case-keychain" class="case-content bg-white p-6 rounded-lg shadow hidden">
          <h2 class="text-2xl font-bold mb-4">ğŸ” Keychain</h2>
          <p class="text-gray-600 mb-4">Senhas, tokens, dados biomÃ©tricos</p>
          <div class="bg-yellow-50 p-3 rounded border-l-4 border-yellow-500">
            <p class="text-sm"><strong>CrÃ­tico para:</strong> Credenciais, certificados, chaves de API</p>
          </div>
          
          <div class="mt-6 bg-yellow-50 p-4 rounded-lg border border-yellow-200">
            <h4 class="font-bold text-yellow-800 mb-3">ğŸ”’ SeguranÃ§a</h4>
            <ul class="space-y-2 text-sm">
              <li>ğŸ›¡ï¸ Criptografia hardware</li>
              <li>ğŸ”„ Sobrevive a reinstalaÃ§Ãµes</li>
              <li>ğŸ‘† IntegraÃ§Ã£o com Touch/Face ID</li>
              <li>âŒ NÃ£o sincroniza entre devices</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Right Column -->
      <div class="space-y-6">
        <!-- Code Examples -->
        <div class="bg-white p-6 rounded-lg shadow">
          <h3 class="text-lg font-bold mb-4">ğŸ’» Exemplo de CÃ³digo</h3>
          <div class="bg-gray-900 text-gray-100 p-4 rounded-lg">
            <pre id="code-example" class="text-sm overflow-x-auto whitespace-pre-wrap">// âœ… CORRETO: ConfiguraÃ§Ãµes simples
@UserDefault("app_theme", defaultValue: "light")
static var theme: String

@UserDefault("notifications_enabled", defaultValue: true)
static var notificationsEnabled: Bool

// Uso simples e eficiente
AppSettings.theme = "dark"
print("Tema atual: \(AppSettings.theme)")</pre>
          </div>
        </div>

        <!-- Decision Framework -->
        <div class="bg-gray-50 p-6 rounded-lg">
          <h3 class="text-xl font-bold mb-4 text-center">ğŸ¯ Framework de DecisÃ£o</h3>
          <div class="space-y-4">
            <div class="bg-yellow-100 p-4 rounded-lg border-l-4 border-yellow-500">
              <h4 class="font-bold text-yellow-800">1. ğŸ” Os dados sÃ£o sensÃ­veis?</h4>
              <p class="text-yellow-700">SIM â†’ Keychain | NÃƒO â†’ Continue</p>
            </div>
            <div class="bg-blue-100 p-4 rounded-lg border-l-4 border-blue-500">
              <h4 class="font-bold text-blue-800">2. â˜ï¸ Precisa de sincronizaÃ§Ã£o?</h4>
              <p class="text-blue-700">SIM â†’ Firebase | NÃƒO â†’ Continue</p>
            </div>
            <div class="bg-purple-100 p-4 rounded-lg border-l-4 border-purple-500">
              <h4 class="font-bold text-purple-800">3. ğŸ—„ï¸ Dados complexos ou grandes?</h4>
              <p class="text-purple-700">SIM â†’ Core Data/SQLite | NÃƒO â†’ Continue</p>
            </div>
            <div class="bg-green-100 p-4 rounded-lg border-l-4 border-green-500">
              <h4 class="font-bold text-green-800">4. ğŸ¯ ConfiguraÃ§Ãµes simples?</h4>
              <p class="text-green-700">SIM â†’ UserDefaults</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Decision Matrix -->
    <div class="mt-12 bg-white p-6 rounded-lg shadow">
      <h2 class="text-2xl font-bold mb-6 text-center">ğŸ“Š Matriz de DecisÃ£o TÃ©cnica Completa</h2>
      <div class="overflow-x-auto">
        <table class="w-full border-collapse border border-gray-300">
          <thead>
            <tr class="bg-gray-50">
              <th class="border border-gray-300 p-3 text-left">CritÃ©rio / CenÃ¡rio</th>
              <th class="border border-gray-300 p-3 text-center">UserDefaults</th>
              <th class="border border-gray-300 p-3 text-center">Core Data</th>
              <th class="border border-gray-300 p-3 text-center">Firebase</th>
              <th class="border border-gray-300 p-3 text-center">Keychain</th>
            </tr>
          </thead>
          <tbody>
            <tr class="hover:bg-gray-50">
              <td class="border border-gray-300 p-3 font-medium">ConfiguraÃ§Ãµes simples</td>
              <td class="border border-gray-300 p-3 text-center text-lg">âœ…</td>
              <td class="border border-gray-300 p-3 text-center text-lg">âŒ</td>
              <td class="border border-gray-300 p-3 text-center text-lg">âŒ</td>
              <td class="border border-gray-300 p-3 text-center text-lg">âŒ</td>
            </tr>
            <tr class="hover:bg-gray-50">
              <td class="border border-gray-300 p-3 font-medium">Dados &lt; 1MB</td>
              <td class="border border-gray-300 p-3 text-center text-lg">âœ…</td>
              <td class="border border-gray-300 p-3 text-center text-lg">âš¡</td>
              <td class="border border-gray-300 p-3 text-center text-lg">âœ…</td>
              <td class="border border-gray-300 p-3 text-center text-lg">âš¡</td>
            </tr>
            <tr class="hover:bg-gray-50">
              <td class="border border-gray-300 p-3 font-medium">Dados &gt; 1MB</td>
              <td class="border border-gray-300 p-3 text-center text-lg">âŒ</td>
              <td class="border border-gray-300 p-3 text-center text-lg">âœ…</td>
              <td class="border border-gray-300 p-3 text-center text-lg">âœ…</td>
              <td class="border border-gray-300 p-3 text-center text-lg">âŒ</td>
            </tr>
            <tr class="hover:bg-gray-50">
              <td class="border border-gray-300 p-3 font-medium">Relacionamentos complexos</td>
              <td class="border border-gray-300 p-3 text-center text-lg">âŒ</td>
              <td class="border border-gray-300 p-3 text-center text-lg">âœ…</td>
              <td class="border border-gray-300 p-3 text-center text-lg">âš¡</td>
              <td class="border border-gray-300 p-3 text-center text-lg">âŒ</td>
            </tr>
            <tr class="hover:bg-gray-50">
              <td class="border border-gray-300 p-3 font-medium">SincronizaÃ§Ã£o automÃ¡tica</td>
              <td class="border border-gray-300 p-3 text-center text-lg">âŒ</td>
              <td class="border border-gray-300 p-3 text-center text-lg">âŒ</td>
              <td class="border border-gray-300 p-3 text-center text-lg">âœ…</td>
              <td class="border border-gray-300 p-3 text-center text-lg">âŒ</td>
            </tr>
            <tr class="hover:bg-gray-50">
              <td class="border border-gray-300 p-3 font-medium">Dados sensÃ­veis</td>
              <td class="border border-gray-300 p-3 text-center text-lg">âŒ</td>
              <td class="border border-gray-300 p-3 text-center text-lg">âŒ</td>
              <td class="border border-gray-300 p-3 text-center text-lg">âš ï¸</td>
              <td class="border border-gray-300 p-3 text-center text-lg">âœ…</td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <div class="mt-4 flex flex-wrap gap-4 text-sm">
        <div class="flex items-center space-x-1">
          <span class="text-green-600 text-lg">âœ…</span>
          <span>Perfeito para este cenÃ¡rio</span>
        </div>
        <div class="flex items-center space-x-1">
          <span class="text-yellow-600 text-lg">âš¡</span>
          <span>Funciona bem com consideraÃ§Ãµes</span>
        </div>
        <div class="flex items-center space-x-1">
          <span class="text-red-600 text-lg">âŒ</span>
          <span>NÃ£o recomendado</span>
        </div>
        <div class="flex items-center space-x-1">
          <span class="text-orange-600 text-lg">âš ï¸</span>
          <span>AtenÃ§Ã£o especial necessÃ¡ria</span>
        </div>
      </div>
    </div>

    <!-- Golden Rule -->
    <div class="mt-8 bg-gradient-to-r from-green-500 to-blue-500 text-white p-6 rounded-lg">
      <h2 class="text-2xl font-bold mb-4">ğŸ¯ Regra de Ouro dos 3 Ks</h2>
      <p class="text-lg mb-4">Use UserDefaults apenas quando os dados sÃ£o:</p>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="bg-white bg-opacity-20 p-4 rounded">
          <h3 class="font-bold">1. ğŸ¯ Kompactos</h3>
          <p class="text-sm">Menos de 100KB total</p>
        </div>
        <div class="bg-white bg-opacity-20 p-4 rounded">
          <h3 class="font-bold">2. âš™ï¸ KonfiguraÃ§Ãµes</h3>
          <p class="text-sm">PreferÃªncias do usuÃ¡rio</p>
        </div>
        <div class="bg-white bg-opacity-20 p-4 rounded">
          <h3 class="font-bold">3. ğŸ”„ Konstantes</h3>
          <p class="text-sm">Mudam raramente</p>
        </div>
      </div>
      <p class="mt-4 text-center font-bold">Se qualquer "K" for falso â†’ NÃƒO use UserDefaults!</p>
    </div>
  </div>

  <script>
    const codeExamples = {
      config: `// âœ… CORRETO: ConfiguraÃ§Ãµes simples
@UserDefault("app_theme", defaultValue: "light")
static var theme: String

@UserDefault("notifications_enabled", defaultValue: true)
static var notificationsEnabled: Bool

// Uso simples e eficiente
AppSettings.theme = "dark"
print("Tema atual: \\(AppSettings.theme)")`,

      large: `// âŒ INCORRETO: Dados grandes no UserDefaults
let transactions = loadTransactions() // 2000+ itens
UserDefaults.standard.set(transactions, forKey: "transactions")

// Problemas:
// - Carregamento lento (3+ segundos)
// - Consumo excessivo de memÃ³ria
// - ImpossÃ­vel fazer queries eficientes
// - App pode travar`,

      coredata: `// âœ… CORRETO: Core Data para dados complexos
@FetchRequest(
    entity: Transaction.entity(),
    sortDescriptors: [NSSortDescriptor(keyPath: \\Transaction.date, ascending: false)]
)
private var transactions: FetchedResults<Transaction>

// Vantagens:
// - Queries eficientes
// - Relacionamentos entre entidades
// - Performance otimizada para grandes volumes`,

      firebase: `// âœ… CORRETO: Firebase para sincronizaÃ§Ã£o
class FirebaseManager {
    func syncData() async {
        // SincronizaÃ§Ã£o automÃ¡tica
        await db.collection("transactions").addSnapshotListener { snapshot, error in
            // Dados sempre atualizados em tempo real
        }
    }
}`,

      keychain: `// âœ… CORRETO: Keychain para dados sensÃ­veis
class KeychainManager {
    func saveCredentials(username: String, password: String) {
        let data = password.data(using: .utf8)!
        let query: [String: Any] = [
            kSecClass as String: kSecClassGenericPassword,
            kSecAttrAccount as String: username,
            kSecValueData as String: data
        ]
        SecItemAdd(query as CFDictionary, nil)
    }
}`
    };

    function showCase(caseType) {
      // Hide all content
      document.querySelectorAll('.case-content').forEach(el => {
        el.classList.add('hidden');
      });

      // Reset all buttons
      document.querySelectorAll('.case-btn').forEach(btn => {
        btn.className = 'case-btn bg-white border-gray-200 p-4 rounded-lg border-2 hover:border-gray-300';
      });

      // Show selected content
      document.getElementById(`case-${caseType}`).classList.remove('hidden');
      document.getElementById(`case-${caseType}`).classList.add('fade-in');

      // Highlight selected button
      const btn = document.getElementById(`btn-${caseType}`);
      const colors = {
        config: 'bg-green-500 text-white',
        large: 'bg-red-500 text-white',
        coredata: 'bg-blue-500 text-white',
        firebase: 'bg-purple-500 text-white',
        keychain: 'bg-yellow-500 text-white'
      };
      btn.className = `case-btn ${colors[caseType]} p-4 rounded-lg border-2 border-transparent`;

      // Update code example
      document.getElementById('code-example').textContent = codeExamples[caseType];
    }

    // Initialize with config case
    showCase('config');
  </script>
</body>
</html>
